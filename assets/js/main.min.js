(function(e){"use strict";function t(){e("body").toggleClass("mobile-nav-active"),e(".mobile-nav-toggle").toggleClass("open"),e("#header").toggleClass("header-mobile-nav"),e("#header .container").toggleClass("mobile")}e(window).on("load",function(){e("#preloader").delay(100).fadeOut("slow",function(){e(this).remove()})}),AOS.init({duration:1e3,easing:"ease-in-out",once:!0,mirror:!1}),e(window).scroll(function(){e(this).scrollTop()>100?e("#header").addClass("header-scrolled"):e("#header").removeClass("header-scrolled")}),e(window).scrollTop()>100&&e("#header").addClass("header-scrolled"),e(window).on("scroll",function(){const t=e(this).scrollTop()+80;t<300?(e(".nav-menu, .mobile-nav").find("li").removeClass("active"),e(".nav-menu, .mobile-nav").find("li:first").addClass("active")):t===e(document).height()-e(window).height()+80?(e(".nav-menu, .mobile-nav").find("li").removeClass("active"),e(".nav-menu, .mobile-nav").find("li:last").addClass("active")):e("section").each(function(){const n=e(this).offset().top,a=n+e(this).outerHeight();t>=n&&t<=a&&(t<=a&&e(".nav-menu, .mobile-nav").find("li").removeClass("active"),e(".nav-menu, .mobile-nav").find(`a[href="#${e(this).attr("id")}"]`).parent("li").addClass("active"))})}),e(window).scroll(function(){e(this).scrollTop()>100?e(".back-to-top").fadeIn("slow"):e(".back-to-top").fadeOut("slow")}),e(".back-to-top").click(function(){return e("html, body").animate({scrollTop:0},1500,"easeInOutExpo"),!1}),e(".mobile-nav").html(e(".nav-menu").html()),e(document).on("click",".mobile-nav-toggle",function(){t()}),e(document).click(function(n){const a=e(".mobile-nav, .mobile-nav-toggle");a.is(n.target)||0!==a.has(n.target).length||e("body").hasClass("mobile-nav-active")&&t()}),e(document).on("click",".nav-menu a, .mobile-nav a",function(n){if(window.location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&window.location.hostname===this.hostname){n.preventDefault();let a=e(this.hash).offset().top;const o=20;a-=e("#header").outerHeight(),e("#header").hasClass("header-scrolled")||(a+=o),"#header"===e(this).attr("href")&&(a=0),e("html, body").animate({scrollTop:a},1500,"easeInOutExpo"),e(".nav-menu .active, .mobile-nav .active").removeClass("active"),e(this).closest("li").addClass("active"),e("body").hasClass("mobile-nav-active")&&t()}}),e(".recommendations-carousel").owlCarousel({autoplay:!0,dots:!0,loop:!0,items:1}),e(".contact-form").submit(function(){const t=e(this).find(".form-group");let n=!1;const a=/^[^\s()<>@,;:/]+@\w[\w.-]+\.[a-z]{2,}$/i;if(t.children("input, textarea").each(function(){const t=e(this);let o=t.attr("data-rule");if(void 0!==o){let e=!1;const i=o.indexOf(":",0);o=i>=0?o.substr(0,i):o.substr(i+1,o.length),("required"===o&&""===t.val()||"email"===o&&!a.test(t.val()))&&(e=!0,n=!0),e?(t.addClass("error"),t.next(".validate").show("blind")):(t.removeClass("error"),t.next(".validate").hide("blind"))}}),e(this).find(".sent-message").slideUp(),e(this).find(".error-message").slideUp(),e(this).find(".error-captcha").slideUp(),n)return e(this).find(".error-message").slideDown().html("Uno o más campos tienen un error. Por favor revisa e inténtalo de nuevo."),!1;if(""===grecaptcha.getResponse())return e(this).find(".error-captcha").slideDown(),!1;e(this).find(".loading").slideDown();const o={name:e(this).find("#name").val(),email:e(this).find("#email").val(),subject:e(this).find("#subject").val(),message:e(this).find("#message").val()},i=`<p><strong>Nombre:</strong> ${o.name}<br>`+`<strong>Email:</strong> ${o.email}<br>`+`<strong>Asunto:</strong> ${o.subject}<br>`+`<strong>Mensaje:</strong> ${o.message}</p>`;return Email.send({SecureToken:"d77754ed-529f-4108-bac2-19ddd2a5765a",To:"cesar.rrguez@gmail.com",From:o.email,Subject:"Nuevo contacto desde la página web",Body:i}).then(t=>{"OK"===t?(e(this).find(".loading").slideUp(),e(this).find(".sent-message").slideDown(),e(this).find("input:not(input[type=submit]), textarea").val("")):(e(this).find(".loading").slideUp(),e(this).find(".error-message").slideDown().html("Hubo un error intentando enviar tu mensaje. Por favor inténtalo de nuevo más tarde."))}),!1})})(window.jQuery);